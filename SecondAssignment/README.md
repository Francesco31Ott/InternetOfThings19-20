# Second Assignment
In this assignment I built on-top of the cloud-based components developed in the first assignment. I replaced the virtual environmental stations developed using Python with new ones built using the *RIOT-OS* and *MQTT-SN* protocol. I used the native emulator of RIOT-OS to run the stations and generate values over MQTT-SN that need to arrive to the cloud via the MQTT.

# Virtual Sensors
Using *RIOT-OS* I developed an application that represents a virtual environmental station that generates periodically a set of random values for 5 different sensors:

- temperature (-50 ... 50 Celsius)
- humidity (0 ... 100%)
- wind direction (0 ... 360 degrees)
- wind intensity (0 ... 100 m/s)
- rain height (0 ... 50 mm / h)

The virtual environmental station uses a unique ID (identity) to publish these random values on an MQTT-SN channel. 
I created several virtual stations running using the native emulator of RIOT-OS and publishing their values on the MQTT-SN channel.

# MQTT-SN broker
I setup a *Really Small Message Broker (RSMB)* where the RIOT-OS applications publish their values over UDP/IPv6. The RSMB is a server implementation of the MQTT and MQTT-SN protocols over Mosquitto.

# MQTT-SN/MQTT transparent bridge
Using *Python* language I developed an MQTT-SN/MQTT transparent bridge. The goal of the bridge is to subscribe to a predefined set of topics on the MQTT-SN broker (e.g., RSMB) and forward all messages received to the same topic on the MQTT broker that is controlled by the cloud-based backend (i.e., publish them). I used the MQTT broker (*AWS IoT*) configured during the previous assignment.

The values generated by the emulated *RIOT-OS* application developed in the previous steps are visible through the [webapp](https://francesco31ott.github.io/InternetOfThings19-20/) developed in the previous assignment.

# Useful Links
- [Video Tutorial](https://www.youtube.com/watch?v=Bs2IaBvrGC4)
- [Blog Post](https://www.hackster.io/francesco-ottaviani/riot-os-nodes-sending-data-to-aws-iot-via-mqtt-sn-17e2f8)

